
name: ella-k8s
type: charm
title: Ella (K8s)
summary: A private mobile network.

description: A private mobile network.
links:
  source:
    - https://github.com/yeastengine/ella-k8s-operator
  issues:
    - https://github.com/canonical/ella-k8s-operator/issues
  documentation: https://discourse.charmhub.io/t/ella-operator-kubernetes/15386

bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
    run-on:
    - name: ubuntu
      channel: "22.04"

parts:
  charm:
    build-packages:
      - cargo
      - rustc

containers:
  ella:
    resource: ella-image
    mounts:
      - storage: config
        location: /etc/ella

resources:
  ella-image:
    type: oci-image
    description: OCI image for ella
    upstream-source: ghcr.io/yeastengine/ella:0.0.1

storage:
  config:
    type: filesystem
    minimum-size: 1M

config:
  options:
    interfaces:
      type: string
      default: "[access,core]"
      description: List of network interfaces handling N3 (GTP) & N6 (SGi) traffic. Ella attaches XDP hook to every interface in this list.
    logging-level:
      type: string
      default: debug
      description: Logging level.
    gnb-subnet:
      type: string
      default: 192.168.251.0/24
      description: gNodeB subnet.
    core-ip:
      type: string
      default: 192.168.250.3
      description: IP address used by the Ella's Core interface.
    core-gateway-ip:
      type: string
      default: 192.168.250.1
      description: Gateway IP address to the Core Network.
    access-ip:
      type: string
      default: 192.168.252.3
      description: IP address used by the Ella's Access interface.
    access-gateway-ip:
      type: string
      default: 192.168.252.1
      description: Gateway IP address to the Access Network.

requires:
  database:
    interface: mongodb_client
  fiveg_gnb_identity:
    interface: fiveg_gnb_identity

provides:
  fiveg-n2:
    interface: fiveg_n2
